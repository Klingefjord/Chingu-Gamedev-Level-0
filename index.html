<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, target-densitydpi=device-dpi"
    />

    <title>Super Mario</title>

    <style>
        html,
        body {
            overflow: hidden;
            width: 100%;
            height: 100%;
            margin: 0;
            padding: 0;
            border: 0;
            background: #444444;
        }

        canvas {
            padding: 0;
            margin: auto;
            display: block;
            background: #63adff; /* Blue sky color */
        }
    </style>

    <script>
            function loop() {
                mapDraw();
                marioDraw();
                marioAnimations();
                marioStatus();
                marioMoving();
                
                setTimeout(loop, 17);
            }
        
            function onloadHandler() {
                count--;
                if (count === 0) {
                    tilesInit(); //Fill the tileX, tileY arrays
                    loop();
                }
            }
        
            //TODO fill the imageURLs array with ulrs that we will USE.
            var imageURLs = ["https://raw.githubusercontent.com/Togeri/Chingu-Gamedev-Level-0/master/Assets/img/Tileset.png", 
                             "Assets/img/mario.png"],
                images = [],
                count = imageURLs.length;

            for (var i = 0; i < count; i++){
                var img = new Image();

                images.push(img);

                 //Set handler and the url
                img.onload = onloadHandler;
                img.src = imageURLs[i];

                 /// if image is cached IE may not trigger onload
                if (img.complete) onloadHandler().bind(img);
            }
    </script>

</head>

<body>
    <!-- Height & width needs to be divisible by 16 (map is 16 tiles high) -->
    <canvas id="canvas" height="640" width="800"></canvas>
    <script src="Bin/game.js"></script>
    <script src="Bin/map.js"></script>
    <script src="Bin/player.js"></script>
    <script src="Bin/enemy.js"></script>
</body>

</html>
